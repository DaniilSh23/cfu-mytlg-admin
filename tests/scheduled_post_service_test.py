from django.test import TestCase
from mytlg.serializers import NewsPostsSerializer
from mytlg.models import ScheduledPosts, BotUser, Interests, NewsPosts, Categories, Channels
from mytlg.servises.scheduled_post_service import ScheduledPostsService
import datetime


class ScheduledPostsServiceTest(TestCase):

    @classmethod
    def setUpTestData(cls):
        # Set up data for the whole TestCase
        cls.emd = '-0.02595321089029312 -0.030796406790614128 -0.023834312334656715 -0.043851979076862335 -0.03400765731930733 -0.019662320613861084 -0.04422048106789589 -0.02478189393877983 -0.012502814643085003 -0.012331723235547543 0.02750619314610958 -0.008311081677675247 0.00455694692209363 -0.008646683767437935 0.006182312965393066 0.023110466077923775 0.011114344000816345 0.01695118471980095 0.024900343269109726 0.003481046762317419 0.003951547667384148 0.017556583508849144 -0.035639602690935135 -0.01988605596125126 -0.03306007385253906 0.016056247055530548 0.016753772273659706 -0.02257087081670761 -0.0224392618983984 -0.010054894722998142 0.028111591935157776 -0.007159506436437368 -0.020320363342761993 0.028874920681118965 -0.03345489874482155 -0.03661350533366203 0.005050478968769312 -0.014871768653392792 0.036534540355205536 0.00162207568064332 0.016069406643509865 0.008021542802453041 0.007284534629434347 -0.002623945940285921 -0.023597417399287224 0.005534140393137932 -0.0009278404759243131 -0.0044944328255951405 0.0045701079070568085 0.023834312334656715 -6.719234806951135e-05 0.002245571231469512 -0.008515074849128723 -0.010653714649379253 0.0005556349642574787 -0.018346235156059265 -0.005688780453056097 -0.010890609584748745 0.018451523035764694 0.007916255854070187 0.0010520460782572627 -0.004129218868911266 -0.016135212033987045 -0.0034382741432636976 -0.008844096213579178 0.010061475448310375 -0.004803712945431471 -0.008396627381443977 -0.023202592507004738 0.024900343269109726 0.02467660792171955 0.023110466077923775 -0.018727900460362434 -0.024900343269109726 0.03790327161550522 0.004830034915357828 -0.013450396247208118 0.005958578083664179 -0.0012025733012706041 -0.0006008754135109484 0.00655081681907177 -0.010160181671380997 -0.020359845831990242 0.01635894551873207 -0.014753321185708046 0.0008126829634420574 -0.013378011994063854 0.020083468407392502 -0.02605849876999855 0.01608256809413433 0.03358650952577591 0.016964346170425415 0.020728351548314095 0.02903285250067711 -0.021925989538431168 0.026519127190113068 -0.02088628150522709 0.024597642943263054 -0.001960967667400837 -0.04924792796373367 0.005478207021951675 -0.007705681957304478 -0.004609590396285057 -0.005201829131692648 -0.034191906452178955 -0.010936672799289227 0.01846468262374401 0.005797357764095068 0.0006243181996978819 -0.001290586544200778 -0.00800838228315115 -0.0020481585524976254 0.0016993957106024027 -0.030191008001565933 0.01406895648688078 0.022465582937002182 -0.0026453323662281036 -0.025637350976467133 -0.007646458223462105 -0.01680641435086727 0.009449495933949947 -0.0055209798738360405 0.02509775571525097 -0.004553656559437513 0.01957019604742527 -0.022215528413653374 -0.029401356354355812 -0.00310267205350101 0.02201811410486698 -0.004718167241662741 0.05353836715221405 -0.005988190416246653 0.0009952898835763335 0.01429269090294838 -0.004724747966974974 0.02365006133913994 -0.012713388539850712 0.003411952406167984 -0.025861084461212158 -0.028532739728689194 0.0007205569418147206 0.015556133352220058 -0.025045111775398254 -0.0013193759368732572 -0.011403882876038551 0.013818900100886822 -0.010574748739600182 0.012265918776392937 0.01563509926199913 -0.005093251820653677 -0.0025318199768662453 0.0017158468253910542 -0.0008217310532927513 0.01708279363811016 -0.0019280656706541777 0.011397303082048893 0.012338303960859776 0.022347135469317436 0.0160167645663023 -0.017490779981017113 -0.00040161178912967443 -0.0028411000967025757 -0.00248904712498188 -0.006935772020369768 0.002367309294641018 0.030112041160464287 0.017372332513332367 -0.022584032267332077 0.006070445757359266 -0.010528686456382275 -0.017411815002560616 0.002275183331221342 -0.027321940287947655 0.002329471753910184 0.012371205724775791 0.048274025321006775 -0.005231440998613834 -0.0037409737706184387 -0.012180374003946781 -7.692161489103455e-06 0.0038890333380550146 0.01853048801422119 0.03590282052755356 -0.016437910497188568 0.006508043967187405 -0.006162571720778942 0.022478744387626648 -0.0038232291117310524 0.018069857731461525 -0.009883804246783257 0.009725873358547688 0.012331723235547543 -0.016490554437041283 -0.009074411354959011 -0.6009774208068848 -0.01739865355193615 0.012970024719834328 0.0024347587022930384 0.019872894510626793 0.0033527284394949675 0.016108889132738113 0.015213951468467712 -0.023663222789764404 -0.058697424829006195 -0.0019724834710359573 0.013226661831140518 -0.02054409869015217 -0.0032096041832119226 -0.0023080853279680014 -0.005603235214948654 0.008028123527765274 -0.01984657347202301 0.036534540355205536 0.0003528755041770637 -0.018872668966650963 0.04061440750956535 0.0020728351082652807 -0.0016146727139130235 0.006863387301564217 -0.007350339088588953 -0.013437235727906227 0.004938611760735512 -0.032323066145181656 -0.00751484977081418 -0.01912272535264492 0.035534314811229706 -0.013279304839670658 -0.0004857179010286927 0.06206660345196724 -0.0015718999784439802 0.026348037645220757 0.003708071541041136 0.0004861291672568768 0.03105962462723255 -0.0011639132862910628 -0.014990217052400112 0.008745389990508556 -0.014937573112547398 -0.000538361317012459 0.023149948567152023 0.01856997050344944 0.018859509378671646 -0.0076530384831130505 -0.0196359995752573 -0.005402531940490007 -0.009660069830715656 -0.0004922983353026211 0.025768959894776344 0.012680485844612122 0.0018770672613754869 0.006577138788998127 0.0026305264327675104 -0.005425563547760248 -0.0023015050683170557 -0.009107313118875027 0.018925312906503677 -0.02361057884991169 -0.02620326727628708 -0.029901469126343727 0.008896740153431892 -0.03890349343419075 -0.009502138942480087 0.00609347689896822 0.0002862486580852419 0.008640103042125702 0.03524477779865265 -0.014371656812727451 0.026176946237683296 -0.003971288911998272 -0.004102897364646196 0.03566592559218407 -0.0065244953148067 -0.0059026447124779224 0.016648484393954277 -0.0374821238219738 -0.004728037863969803 -0.00964690838009119 -0.0228867307305336 0.017030149698257446 0.01502969954162836 -0.01622733660042286 -0.029453998431563377 0.009107313118875027 0.00024573790142312646 0.019728126004338264 0.011417044326663017 0.004869517404586077 -0.00591909559443593 -0.00626456830650568 0.03105962462723255 0.022255010902881622 0.025940049439668655 0.0125817796215415 -0.039403606206178665 0.0067515200935304165 -0.007389821577817202 0.008449270389974117 0.01725388504564762 -0.002712781773880124 0.008080766536295414 -0.0031158330384641886 0.0014657905558124185 0.03216513618826866 -0.029848825186491013 0.000399555399781093 -0.0010092732263728976 0.005771036259829998 0.023373683914542198 -0.027532514184713364 -0.04435208812355995 0.013529361225664616 -0.014753321185708046 0.027400905266404152 -0.02312362752854824 0.0011943478602916002 0.0017158468253910542 0.04400990903377533 0.011943478137254715 -0.022702479735016823 -0.005711812060326338 -0.015056020580232143 -0.023939600214362144 -0.0330074317753315 -0.00486622704192996 -0.005389370955526829 -0.028690669685602188 0.03348122164607048 0.005149185657501221 0.017438136041164398 -0.001095641404390335 0.030533188953995705 -0.022478744387626648 -0.00304673844948411 -0.03611339256167412 -0.01385838259011507 0.0004873629950452596 0.018583130091428757 0.010416818782687187 -0.01622733660042286 -0.031112266704440117 0.0008056912338361144 0.01178554818034172 -0.010147021152079105 0.011430204845964909 0.009850901551544666 0.011324917897582054 -0.01670112833380699 -0.004250957164913416 0.028769634664058685 -0.01296344492584467 -0.03350754454731941 -0.031296517699956894 -0.006070445757359266 0.005570332985371351 0.004971513990312815 0.0066495235078036785 -0.016727449372410774 -0.02312362752854824 -0.008205794729292393 0.016964346170425415 -0.019491229206323624 0.008396627381443977 0.007883354090154171 -0.0024166624061763287 -0.01618785411119461 -0.012956864200532436 0.007324017118662596 0.00042279253830201924 -0.004793842323124409 -0.0012338303495198488 -0.018412040546536446 0.00017253062105737627 -0.01905692182481289 -0.0042904396541416645 -0.005034028086811304 -0.0005556349642574787 -0.03677143529057503 0.015253433957695961 0.028769634664058685 0.009620586410164833 0.0008402385283261538 0.04887942597270012 0.02167593315243721 -0.003005610778927803 -0.02405804768204689 0.0049188705161213875 0.025282006710767746 0.014319012872874737 -0.005550591740757227 -0.01770135387778282 -0.013555683195590973 -0.010811644606292248 -0.014082117937505245 0.02184702269732952 0.030006755143404007 -0.00700815673917532 0.02571631595492363 -0.03184927627444267 -0.00845585111528635 -0.007567493245005608 0.0057216826826334 -0.007435884326696396 0.020583581179380417 -0.0013062150683254004 0.009067830629646778 0.0016475748270750046 0.013660970143973827 0.010976155288517475 0.004958353005349636 0.015687741339206696 -0.019412264227867126 0.0031717666424810886 0.032928466796875 0.0009467591880820692 -0.027295619249343872 -0.030401580035686493 0.009949608705937862 -0.00407328549772501 -0.00015073294343892485 0.011061700992286205 0.03571856766939163 -0.006863387301564217 0.009377110749483109 -0.007475367281585932 0.006172442343086004 0.02082047611474991 -0.0025285298470407724 0.02399224415421486 0.008561138063669205 -0.0036883302964270115 0.022215528413653374 -0.02264983579516411 0.021307429298758507 -0.01695118471980095 -0.000715210335329175 0.019175369292497635 0.008383465930819511 0.0018573260167613626 0.03400765731930733 -0.0018178434111177921 0.0214653592556715 0.003704781411215663 -0.01791192777454853 -0.004609590396285057 -0.004273988306522369 0.008488752879202366 -0.015385042876005173 -0.018898991867899895 0.017280206084251404 -0.03535006195306778 0.004836615175008774 0.0003989384858869016 0.009502138942480087 0.011759226210415363 0.021096855401992798 0.03213881328701973 0.00089000299340114 0.03645557537674904 0.005899354349821806 0.009074411354959011 0.024005403742194176 0.00014096511586103588 0.0007892401772551239 -0.00956136267632246 -0.012193534523248672 -0.02603217586874962 0.01891215145587921 0.007027897983789444 0.01750394143164158 0.0071002827025949955 0.017451297491788864 -0.005175507161766291 -0.005310405977070332 -0.029743537306785583 -0.00027555544511415064 -0.022426100447773933 0.026545450091362 0.018451523035764694 -0.0022340556606650352 -0.020978406071662903 0.01085770782083273 -0.012338303960859776 0.0023031500168144703 0.03092801570892334 0.0057611651718616486 0.0003598672046791762 -0.02905917353928089 0.017451297491788864 -0.002003740519285202 -0.01397683098912239 0.008646683767437935 -0.005099832080304623 -0.04543127864599228 -0.022899892181158066 0.02405804768204689 0.011713162995874882 -0.013147696852684021 -0.027427226305007935 0.03403397649526596 -0.001868841820396483 -0.0036850401666015387 -0.028874920681118965 -0.004014061763882637 -0.0003724111302290112 0.01705647073686123 -0.014055795967578888 -0.017109114676713943 0.012476492673158646 0.0004548721481114626 0.00823211669921875 -0.0037541345227509737 0.0022077339235693216 0.031428128480911255 0.0003898903960362077 0.014200565405189991 -0.002026772126555443 -0.037508442997932434 -0.017517101019620895 0.07591182738542557 0.004981384612619877 0.011186729185283184 0.0103049511089921 0.006514624692499638 -0.008791453205049038 -0.011548652313649654 -0.03769269585609436 -0.008330822922289371 -0.03379708155989647 0.007238471880555153 -0.01984657347202301 -0.013042409904301167 0.007310856599360704 0.01922801323235035 -0.00186390639282763 -0.0141874048858881 -0.007909675128757954 0.013674130663275719 -0.025360971689224243 0.013739935122430325 -0.0007703214650973678 -0.008824354968965054 0.047063227742910385 0.04135141521692276 -0.013674130663275719 0.005132734309881926 0.01301608793437481 -2.8840786399086937e-05 -0.012660744599997997 0.004787262063473463 -0.012384367175400257 4.367245492176153e-05 0.029453998431563377 -0.018306752666831017 -0.026019016280770302 -0.029401356354355812 0.011245952919125557 -0.000750168866943568 0.0020152563229203224 0.02478189393877983 -0.00020923707052133977 0.006254697684198618 0.005024157464504242 -0.0017668451182544231 -0.004566817544400692 -0.010140440426766872 0.026545450091362 -0.01574038527905941 -0.02150484174489975 0.01618785411119461 0.015582455322146416 -0.05711812153458595 0.0012009282363578677 0.0027703605592250824 0.012535716407001019 -0.007014736998826265 -0.025242524221539497 -0.02043881267309189 -0.024150174111127853 -0.003117478219792247 -0.027006080374121666 0.009581103920936584 -0.011140665970742702 0.008271599188446999 -0.010449720546603203 -0.014766482636332512 -0.011055120266973972 -0.0014756611781194806 -0.007666199468076229 -0.018109340220689774 -0.01946490816771984 -0.034191906452178955 0.018175143748521805 0.037745337933301926 -0.0010693196672946215 -0.006077026017010212 -0.018346235156059265 -0.0035896238405257463 0.03745580092072487 0.0018803575076162815 0.006705456878989935 -0.01375309657305479 -0.01397683098912239 0.0031141878571361303 0.003142154775559902 0.0013884705258533359 -0.0206099022179842 -0.006889708805829287 0.022426100447773933 0.016793254762887955 0.011245952919125557 0.005399242043495178 -0.01446378231048584 0.0065047540701925755 0.013233242556452751 0.006077026017010212 0.014963895082473755 0.004691845737397671 -0.006652813404798508 0.0001696516847005114 0.01853048801422119 -0.002571302466094494 0.007310856599360704 0.0049945455975830555 0.03887717425823212 0.012390946969389915 0.009403432719409466 0.008567717857658863 0.005136024672538042 0.01092351134866476 -0.021768057718873024 -0.02520304173231125 -0.03169134631752968 -0.013206920586526394 -0.006679135374724865 -0.002604204695671797 -0.002656848169863224 0.005731553304940462 -0.01608256809413433 0.021768057718873024 -0.007857032120227814 0.00495506264269352 0.00837030541151762 0.015542972832918167 0.013542522676289082 -0.0013909381814301014 -0.022281331941485405 -0.007310856599360704 0.018543647602200508 -0.000248205556999892 0.010607651434838772 -0.012022443115711212 -0.02605849876999855 -0.032086171209812164 -0.0019000987522304058 0.002410082146525383 -0.011318337172269821 0.004395726602524519 -0.03103330172598362 -0.01922801323235035 -0.010318112559616566 0.0012058635475113988 -0.021136337891221046 -0.015490328893065453 -0.033744439482688904 -0.011120924726128578 0.006929191295057535 -0.009449495933949947 0.025360971689224243 -0.03887717425823212 0.028322165831923485 -0.003467886010184884 0.01406895648688078 0.03150709345936775 -0.019096404314041138 -0.00937053095549345 -0.007350339088588953 0.014963895082473755 0.02647964470088482 0.0328495018184185 0.02063622511923313 0.0030631895642727613 0.0019461618503555655 0.019385943189263344 -0.00911389384418726 -0.0020201916340738535 -0.013279304839670658 -0.016990667209029198 0.017267044633626938 0.0015924638137221336 0.004997835494577885 0.0014740159967914224 -0.02239977940917015 -0.026295393705368042 0.008120249025523663 0.0010693196672946215 0.027295619249343872 -0.031191231682896614 0.005928966216742992 -0.01678009331226349 -0.021925989538431168 0.01935962215065956 -0.013259563595056534 -0.04045647755265236 -0.01204876508563757 0.019346460700035095 0.01375309657305479 0.03184927627444267 -0.014147921465337276 0.02054409869015217 -0.019872894510626793 0.0206099022179842 0.01287789922207594 -0.0005630379309877753 -0.007330597843974829 -0.024834537878632545 -0.01722756214439869 -0.009600845165550709 0.04045647755265236 0.012404108420014381 0.016451071947813034 0.013450396247208118 0.011772386729717255 0.003155315527692437 0.027085045352578163 0.006994995754212141 0.014753321185708046 0.016174694523215294 -0.031638700515031815 -0.003994320053607225 -0.009291565045714378 -0.0028838729485869408 -0.0023475680500268936 0.012884479947388172 -0.0041127679869532585 -0.006238246336579323 0.024637125432491302 0.008896740153431892 -0.0023919858504086733 -0.0029891596641391516 0.00994302798062563 0.04514174163341522 -0.008969124406576157 0.029217103496193886 0.02616378478705883 0.0306911189109087 -0.044615305960178375 0.017490779981017113 0.005994770675897598 -0.00032634814851917326 0.025900566950440407 0.016819575801491737 -0.02703240141272545 -0.01563509926199913 0.037640053778886795 0.009133635088801384 -0.0005761987995356321 -0.026703380048274994 0.011851352639496326 -0.018477844074368477 0.006935772020369768 0.003892323700711131 -0.025018790736794472 0.002725942526012659 0.004247666802257299 -0.023031501099467278 0.011864513158798218 -0.007791227661073208 0.0005424740957096219 -0.010041734203696251 0.011917156167328358 -0.0224392618983984 0.019754447042942047 0.003984449431300163 -0.005205119028687477 0.01175264548510313 -0.00600464129820466 -0.0339023694396019 0.0032030236907303333 -0.02661125361919403 0.039535216987133026 5.237352979747811e-06 0.0018803575076162815 -0.0005766100948676467 0.00806102529168129 -0.015556133352220058 -0.0012979896273463964 -0.013266144320368767 0.011351239867508411 -0.01502969954162836 0.004649072885513306 0.00862694252282381 -0.018030375242233276 0.009377110749483109 0.00919943954795599 -0.010173343122005463 -0.014726999215781689 -0.013503040187060833 -0.002604204695671797 0.008870418183505535 0.015687741339206696 0.00964690838009119 0.007047639228403568 0.002461080439388752 -0.009331048466265202 0.003434983780607581 -0.01884634792804718 0.02139955386519432 -0.01888583041727543 -0.0013991636224091053 -0.024387069046497345 0.00672190822660923 0.0015875283861532807 0.008192634209990501 0.005195248406380415 0.007672779727727175 0.010331273078918457 -0.008640103042125702 -0.021320588886737823 0.008172892965376377 0.009278404526412487 -0.0019132596207782626 0.01175264548510313 0.017964569851756096 -0.01650371588766575 0.004665524233132601 -0.0017240723827853799 0.009712712839245796 -0.027848374098539352 -0.033744439482688904 -0.01104853954166174 -0.0052742138504981995 0.011943478137254715 -0.006705456878989935 0.022215528413653374 -0.006024382542818785 -0.02388695627450943 -0.017819801345467567 -0.009587684646248817 -0.010370755568146706 -0.0020020955707877874 0.019622838124632835 -0.028295842930674553 -0.009212600067257881 -0.007179247681051493 0.029796181246638298 -0.02782205305993557 -0.019372781738638878 0.0019461618503555655 0.006659394130110741 0.004734618589282036 -0.0027983272448182106 -0.003048383630812168 -0.007903095334768295 -0.009002026170492172 -0.010364175774157047 -0.005185377784073353 0.025808442384004593 -0.009357369504868984 0.004379275254905224 0.052038032561540604 0.002400211291387677 0.027558835223317146 0.0028164235409349203 -0.019557034596800804 -0.007508269045501947 -0.022307652980089188 0.0039679985493421555 -0.01846468262374401 -0.010864287614822388 0.03761373087763786 0.012483073398470879 -0.03179663047194481 -0.024452872574329376 0.023689543828368187 -0.03258628398180008 0.01653003692626953 -0.009363950230181217 0.044957488775253296 0.035507991909980774 -0.0033510832581669092 0.0037311031483113766 0.04629989713430405 0.00797547958791256 0.04064072668552399 -0.004770810715854168 -0.016056247055530548 -0.006142830476164818 -0.02647964470088482 0.0014863543910905719 0.0065409461967647076 -0.023663222789764404 -0.015648258849978447 0.040166936814785004 2.575299731688574e-06 0.008870418183505535 0.03477098420262337 -0.002586108399555087 -0.013470137491822243 0.015424525365233421 -0.0028049077372998 -0.012858157977461815 -0.002372244605794549 0.0020942215342074633 -0.05240653455257416 0.014779643155634403 0.006389596499502659 0.0031750567723065615 -0.023044660687446594 0.03900878131389618 -0.00486622704192996 -0.0020070308819413185 0.004481271840631962 -0.03124387562274933 -0.018214626237750053 0.0019642580300569534 0.0002582818269729614 0.013818900100886822 0.008390046656131744 0.010745840147137642 0.021346911787986755 0.012450171634554863 -0.02301833964884281 0.006379725877195597 -0.004020642023533583 -0.022149723023176193 0.012700227089226246 0.018175143748521805 -0.014569069258868694 0.016056247055530548 -0.006274438928812742 0.012884479947388172 0.005201829131692648 -0.0008488753228448331 -0.006817324087023735 -0.005228150635957718 -0.00866642501205206 0.015714064240455627 0.007962319068610668 0.005553882103413343 -0.007172667421400547 -0.028638025745749474 0.024874020367860794 -0.010318112559616566 -0.028111591935157776 -0.00546175567433238 -0.00956136267632246 -0.03005939908325672 -0.010285209864377975 0.0007057510083541274 -0.021070532500743866 -0.008771711960434914 0.0030237070750445127 -0.005346598569303751 0.0036356868222355843 0.2695343494415283 -0.028506416827440262 -0.002855906030163169 0.01674061082303524 0.0038001975044608116 -0.01506918203085661 0.01524027343839407 0.0032606024760752916 -0.003365889424458146 0.013555683195590973 -0.032928466796875 -0.005053769331425428 -0.02533465065062046 -0.01335827074944973 -0.004991255234926939 0.0013909381814301014 -0.04377301037311554 -0.02301833964884281 0.0038429703563451767 0.0019362911116331816 0.011950058862566948 0.004698425997048616 -0.021070532500743866 -0.0037903268821537495 -0.0035007880069315434 0.007435884326696396 0.010298371315002441 0.034955237060785294 0.019346460700035095 0.008811194449663162 -0.01292396243661642 -0.021149497479200363 -0.010548427700996399 -0.011568393558263779 0.0019971600268036127 -0.023689543828368187 0.017148597165942192 0.025466259568929672 0.018280431628227234 0.012298821471631527 0.019978182390332222 0.0024906923063099384 0.00867958553135395 -0.025808442384004593 -0.006481722462922335 -0.0164642333984375 -0.0024051466025412083 -0.001593286287970841 -0.013516200706362724 -0.02033352479338646 -0.040166936814785004 -0.011456526815891266 0.0043595340102910995 0.026150623336434364 -0.0053762104362249374 -0.007567493245005608 0.019859734922647476 0.021241623908281326 -0.019478069618344307 0.02716401033103466 -0.003556721843779087 0.03582385554909706 -0.007291114889085293 0.02675602398812771 -0.022202366963028908 0.0006954690907150507 -0.003905484452843666 0.030296294018626213 0.024808216840028763 -0.006883128546178341 0.017109114676713943 -0.015187629498541355 -0.011982960626482964 0.0003456781560089439 -0.03213881328701973 -0.030612153932452202 0.012206695042550564 0.03971946984529495 0.03937728703022003 0.050327118486166 -0.013950509019196033 0.02992779016494751 -0.001957677537575364 0.016306301578879356 0.007218730170279741 -0.025663672015070915 0.02178121916949749 -0.010147021152079105 -0.005784196779131889 -0.01100905705243349 0.03771901875734329 -0.014305852353572845 -0.019662320613861084 -0.007903095334768295 0.015990441665053368 -0.00906125083565712 -0.0144111393019557 0.021096855401992798 -0.021649610251188278 0.013029249384999275 -0.035876497626304626 0.010219406336545944 -0.0023031500168144703 0.016161533072590828 -0.01047604251652956 -0.011213050223886967 -0.013871544040739536 -0.011180148459970951 0.03269157186150551 -0.04930057376623154 0.012423849664628506 -0.018556809052824974 0.01567458175122738 -0.009383691474795341 0.02039932832121849 -0.0005860694218426943 0.015582455322146416 -0.009633747860789299 0.0016064471565186977 -0.023084145039319992 -0.013674130663275719 -0.033086396753787994 -0.013371431268751621 -0.010212825611233711 -0.0065047540701925755 0.0016089148120954633 -0.0034777566324919462 -0.009567943401634693 0.0010890609119087458 -0.02578211948275566 0.03205984830856323 0.0007925303652882576 0.014608551748096943 -0.016411589458584785 0.01551665086299181 0.007159506436437368 0.019241172820329666 -0.005132734309881926 -0.002614075317978859 0.010160181671380997 -0.019306978210806847 0.011542072519659996 -0.005010996479541063 -0.014726999215781689 0.008501914329826832 -0.037982236593961716 0.026321714743971825 0.015319238416850567 -0.03421822935342789 0.022373458370566368 -0.0475633405148983 -0.013529361225664616 -0.029954111203551292 0.004083156120032072 -0.004066704772412777 -0.01275287102907896 -0.01922801323235035 -0.03713994100689888 0.00714634545147419 0.011180148459970951 -0.04064072668552399 0.018596291542053223 -0.002470951061695814 -0.013463557697832584 -0.016687966883182526 0.008179472759366035 -0.1656162291765213 0.015095504000782967 -0.0067515200935304165 0.012858157977461815 0.023557934910058975 0.005277503747493029 0.002559786895290017 4.95331478305161e-05 -0.03506052494049072 0.0037738760001957417 -0.002415017457678914 0.00897570513188839 -0.020267721265554428 -0.042930718511343 0.012739710509777069 -0.0026272363029420376 -0.020965246483683586 0.007435884326696396 0.02354477345943451 0.008047864772379398 0.02565051056444645 -0.01980709098279476 0.019070083275437355 -0.0033987914212048054 0.015608777292072773 -0.002591043943539262 -0.027874696999788284 0.0017915217904374003 -0.014055795967578888 -0.007942577823996544 -0.025282006710767746 0.006448820233345032 0.03026997298002243 0.019109565764665604 0.0028443902265280485 0.000876019592396915 -0.0032457965426146984 0.007370080333203077 -0.010706357657909393 0.03340225666761398 0.026084819808602333 0.015332398936152458 0.004790551960468292 0.03290214389562607 -0.0019642580300569534 -0.0030220618937164545 -0.0032589572947472334 0.01778031885623932 0.002982579404488206 -0.0010553362080827355 0.029638251289725304 -0.0103049511089921 0.013252983801066875 -0.004053544253110886 0.014845447614789009 0.03535006195306778 0.008686166256666183 -0.013252983801066875 0.00971929356455803 -0.014161082915961742 -0.022083919495344162 -0.00026794683071784675 0.016214177012443542 -0.03279685601592064 -0.026005854830145836 -0.030296294018626213 -0.01891215145587921 0.012344884686172009 -0.017517101019620895 0.006383015774190426 -0.012627842836081982 0.0028920983895659447 0.02422913908958435 -0.015490328893065453 -0.007172667421400547 0.013818900100886822 -0.04869517311453819 0.01577986776828766 -0.00504060834646225 0.0014123244909569621 0.0024248880799859762 0.05077458918094635 -0.016964346170425415 0.02050461620092392 -0.0032408612314611673 0.01784612238407135 0.00792283657938242 0.008646683767437935 0.013950509019196033 0.013167438097298145 0.030664797872304916 -0.008067606016993523 0.030664797872304916 0.003658718429505825 0.005836840253323317 0.02795366197824478 -0.010890609584748745 0.013924187049269676 0.006468561477959156 -0.001603156910277903 0.0012478138087317348 0.017003828659653664 -0.03271789103746414 0.008824354968965054 0.006735068745911121 0.015306076966226101 0.0054979482665658 0.0019181949319317937 0.053090900182724 -0.018477844074368477 -0.01684589684009552 -0.0007448222604580224 0.014437460340559483 0.014779643155634403 -0.01774083636701107 0.02005714736878872 -0.016556357964873314 -0.012476492673158646 0.0031767019536346197 -0.013832061551511288 0.0686996728181839 -0.00011268984235357493 0.012417268939316273 0.009173117578029633 -0.015371881425380707 -0.009785098023712635 -0.05885535478591919 -0.030427902936935425 0.004224635194987059 0.019872894510626793 0.014437460340559483 0.010469461791217327 0.01025230810046196 0.007363499607890844 0.0010833031265065074 0.02482137642800808 0.011285435408353806 -0.015608777292072773 0.0009516944992356002 0.006310631055384874 0.03103330172598362 0.02043881267309189 0.002278473461046815 -0.009949608705937862 -0.0196359995752573 0.026190105825662613 -0.005751294549554586 -0.010232566855847836 -0.012989765964448452 -0.0027736506890505552 -0.006869967561215162 0.010462881997227669 -0.02046513371169567 0.013312207534909248 0.012147471308708191 -0.007547752000391483 -0.009396851994097233 -0.012160632759332657 -0.010864287614822388 0.0035205294843763113 -0.011877673678100109 -0.00714634545147419 -0.033744439482688904 -0.027453549206256866 0.01718807965517044 -0.0183330737054348 0.030427902936935425 0.02813791297376156 0.013470137491822243 -0.024084368720650673 -0.0005276681040413678 -0.01629314199090004 -0.0076530384831130505 0.013285885564982891 0.0021550904493778944 0.005356469191610813 0.002128768712282181 -0.028006304055452347 -0.0412198044359684 0.02905917353928089 0.02205759659409523 0.006856806576251984 0.005734843667596579 0.0347973071038723 -0.0004906532121822238 -0.03787694871425629 0.008824354968965054 -0.00964690838009119 -0.024413390085101128 -0.006317211780697107 -0.022623514756560326 -0.006758100353181362 -0.02150484174489975 0.0032918595243245363 0.014082117937505245 0.0036521379370242357 0.010397077538073063 0.014621713198721409 -0.011226211674511433 0.023360522463917732 -0.031085945665836334 -0.005356469191610813 0.00041477265767753124 -0.03616603836417198 0.017582906410098076 -0.01818830519914627 -0.021965472027659416 -0.03116491064429283 0.006577138788998127 -0.014700678177177906 0.022004954516887665 0.019478069618344307 0.031112266704440117 0.0028970337007194757 -0.017925087362527847 -0.05501238629221916 0.003048383630812168 -0.002855906030163169 0.005178797524422407 -0.001868841820396483 -0.011792127974331379 0.034323517233133316 -0.02284724824130535 -0.0022439262829720974 0.004922160878777504 -0.003912064712494612 -0.015266594476997852 -0.025005629286170006 -0.07327965646982193 0.005853291600942612 -0.02099156752228737 -0.003467886010184884 -0.0035534314811229706 0.0051393150351941586 0.009140215814113617 -0.01916220784187317 -0.013660970143973827 0.006843646056950092 -0.018043534830212593 0.015187629498541355 0.007396401837468147 -0.0319545604288578 -0.009896964766085148 -0.03048054687678814 0.0012527491198852658 -0.006007931660860777 0.015964120626449585 0.020425651222467422 0.021202141419053078 0.0032490866724401712 0.003556721843779087 0.01529291644692421 0.025282006710767746 0.022241849452257156 -0.01406895648688078 0.029243426397442818 -0.012035604566335678 -0.026492806151509285 0.004096317104995251 -0.021860184147953987 -0.03358650952577591 0.0055473013781011105 -0.003428403288125992 -0.028006304055452347 -0.0012560393661260605 0.04932689294219017 0.019346460700035095 0.007791227661073208 -0.004119348246604204 -0.03184927627444267 -0.008343983441591263 -0.012469912879168987 -0.05009022355079651 -0.012917381711304188 -0.006198763847351074 0.004056834150105715 0.031665023416280746 -0.017596065998077393 0.0010265469318255782 0.020215077325701714 -0.029506642371416092 -0.02188650518655777 -0.008120249025523663 0.019662320613861084 -0.009587684646248817 0.0010536911431699991 -0.011857932433485985 0.014608551748096943 0.02871699072420597 0.02678234502673149 0.009232341311872005 -0.028980208560824394 -0.0002907727030105889 -0.0007707327022217214 -0.02961193025112152 -0.009745614603161812 0.016148371621966362 -0.04087762534618378 -0.044957488775253296 0.005251182243227959 0.005859871860593557 0.013818900100886822 -0.019320139661431313 -0.007501688785851002 0.011436785571277142 -0.024308104068040848 -0.028243200853466988 0.020307203754782677 0.018820026889443398 0.0160167645663023 -0.0051656365394592285 -0.00885725673288107 -0.004375985357910395 0.024518677964806557 -0.021360071375966072 0.013647809624671936 0.005228150635957718 0.017003828659653664 -0.01818830519914627 0.0076530384831130505 -0.013871544040739536 0.024939825758337975 0.0012338303495198488 0.009989091195166111 -0.0074490453116595745 0.008916481398046017 0.004681975115090609 0.014555908739566803 0.0148586081340909 -0.0031750567723065615 0.0028394549153745174 -0.013384591788053513 -0.015885155647993088 0.004231215920299292 -0.01182503066956997 -0.029638251289725304 -0.024110691621899605 0.00792283657938242 -0.025518903508782387 -0.004859646782279015 -0.017385492101311684 0.015174468979239464 -0.027532514184713364 0.01385838259011507 -0.014608551748096943 -0.01064713392406702 0.009449495933949947 0.01635894551873207 0.034639377146959305 0.01753026247024536 0.03758740797638893 0.014003152027726173 0.030085720121860504 -0.022584032267332077 0.012660744599997997 -0.008600620552897453 -0.004046963527798653 -0.024466034024953842 0.00014785400708205998 0.012483073398470879 0.0018622613279148936 -0.036323968321084976 -0.028111591935157776 -0.01218695379793644 0.005458465777337551 -0.0016023344360291958 0.01147626806050539 0.05166952684521675 0.024294942617416382 0.023321039974689484 0.007574073504656553 -0.0008204972255043685 0.022978857159614563 0.0051656365394592285 -0.0042147645726799965 -0.031006980687379837 -0.029401356354355812 0.013489878736436367 -0.010416818782687187 -0.0005239666206762195 -0.018688417971134186 -0.007528010290116072 0.018240949138998985 0.015766708180308342 0.03237570822238922 -0.021557483822107315 0.024808216840028763 0.006554107181727886 0.004964933730661869 0.03582385554909706 0.002387050539255142 -0.0001941226510098204 -0.0030368678271770477 0.018925312906503677 0.013963669538497925 0.005356469191610813 -0.03266524896025658 0.010179922915995121 -0.007613555993884802 -0.015832511708140373 -0.010535266250371933 0.01047604251652956 -0.030112041160464287 -0.0062941801734268665 -0.01491125114262104 0.027901018038392067 0.011140665970742702 -0.021754898130893707 0.02071519009768963 -0.012700227089226246 -0.046826332807540894 0.002375534735620022 0.00615270109847188 0.0144111393019557 0.034876272082328796 -0.00967981107532978'
        cls.bot_user = BotUser.objects.create(
            tlg_id="123456789",
            tlg_username="user_name",
            language_code="ru",
        )
        cls.category = Categories.objects.create(category_name="test")
        cls.serializer = NewsPostsSerializer()

    def test_get_posts_for_show(self):
        # Create test data
        channel = Channels.objects.create(
            channel_name='название канала',
            channel_link='https://t.me/+19vCK2iwUic2Y2Iy',
            description='описание',
            subscribers_numb=4,
            category=self.category,
            is_ready=True
        )
        interest = Interests.objects.create(bot_user=self.bot_user, is_active=True, interest_type='main',
                                            category_id=self.category.id)

        news_post = NewsPosts.objects.create(
            channel=channel,
            text='В инвесткомпании BlackRoock назвали фейком новость о том, что SEC одобрила спотовый биткоин-ETF. Главный аналитик BBG по ETF говорит, что новость «очень странная» и никак не подтверждена. @bankrollo',
            short_text='BlackRock отвергает новость о том, что SEC одобрила спотовый биткоин-ETF, называя ее фейком. Новость не подтверждена и является странной, согласно главному аналитику BBG по ETF.',
            post_link='https://t.me/bankrollo/20300',
            embedding=self.emd,
            is_sent=False,
        )

        ScheduledPosts.objects.create(
            selection_hash="test_hash",
            bot_user=self.bot_user,
            news_post=news_post,
            interest=interest,
            when_send=datetime.datetime.now()
        )

        # Call the method you want to test
        posts, tlg_id = ScheduledPostsService.get_posts_for_show("test_hash")

        # Assertions
        self.assertEqual(len(posts), 1)
        self.assertEqual(tlg_id, self.bot_user.tlg_id)
