{% extends 'mytlg/base.html' %}

{% block 'title' %}
  Стартовые настройки
{% endblock %}

{% block 'body' %}

  <div class="row">
<!--    <h4 class="fw-bold py-3 mb-1"><span class="text-muted fw-light">Настройки /</span> Интересы и время новостей</h4>-->
    <div class="col-xl-6 my-form-border">
      <div class="card mb-1 my-form-area">
        <h5 class="card-header mb-0 pb-0">Сформулируйте Ваши интересы</h5>
        <div class="card-body">
          <div class="row gy-3">
            <div class="col-md">
              <div class="demo-inline-spacing mt-1">

                <form id="interestsForm" action="{% url 'mytlg:write_interests' %}" method="post">
                  {% csrf_token %}
                  {% if messages %}
                      <ul class="messages">
                          {% for message in messages %}
                              <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                          {% endfor %}
                      </ul>
                  {% endif %}
                  <input class="my-filling-fields" type="text" id="tg-id-input" value="" name="tlg_id">

                  {% for i_interest in interest_examples %}
                    <div class="row mb-3">
                      <small class="text-light fw-semibold">Интерес № {{ forloop.counter }}:</small>
  <!--                    <label class="col-sm-2 form-label" for="basic-icon-default-message">Интерес №1</label>-->
                      <div class="col-sm-10">
                        <div class="input-group input-group-merge">
                          <span id="basic-icon-default-message2" class="input-group-text"><i class="bx bx-comment"></i></span>
                          <textarea id="basic-icon-default-message" name="interest" class="form-control" rows="2" maxlength="30" placeholder="{{ i_interest }}" aria-label="{{ i_interest }}" aria-describedby="basic-icon-default-message2"></textarea>
                        </div>
                      </div>
                    </div>
                  {% endfor %}
                  <hr class="mb-2 mt-3">
                  <div class="mb-0 row">
                    <small class="text-light fw-semibold">Когда присылать новости?</small>
<!--                    <label for="whenSendNews" class="col-md-2 col-form-label">Когда присылать новости?</label>-->
                    <div class="col-md-10">
                      <input class="form-control" name="when_send_news" type="time" value="12:30:00" id="whenSendNews" required>
                    </div>
                  </div>

                  <div class="mb-1 mt-3">
                    <button id="writeInterestsBtn" type="submit" class="btn btn-info my-btn-clr">Отправить</button>
                  </div>
                </form>

              </div>

              <div id="ajaxResult">
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!--СКРИПТ ДЛЯ ОТПРАВКИ ДАННЫХ О ВЫБРАННЫХ ТЕМАТИКАХ И ОБНОВЛЕНИЕ ФОРМЫ КАНАЛАМИ ДЛЯ ЭТИХ ТЕМАТИК-->
<!--  <script>-->
<!--    $(document).ready(function() {-->
<!--      $('#interestsForm').submit(function(event) {-->
<!--        event.preventDefault(); // предотвращаем стандартное поведение формы-->
<!--        var formData = $(this).serialize();-->

<!--        $.ajax({-->
<!--          url: '{% url 'mytlg:write_interests' %}', // путь к обработчику на сервере-->
<!--          type: 'POST',-->
<!--          data: formData,-->
<!--          dataType: 'html', // указываем, что ожидаем ответ в виде HTML-->
<!--          success: function(data) {-->
<!--            $('#ajaxResult').html(data); // обновляем содержимое элемента с id="ajaxResult"-->
<!--            $('#interestsForm').hide();   // Скрываем форму с интересами-->
<!--          },-->
<!--          error: function() {-->
<!--            alert('Произошла ошибка');-->
<!--          }-->
<!--        });-->
<!--      });-->
<!--    });-->
<!--  </script>-->

{% endblock %}